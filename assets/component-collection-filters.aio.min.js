/*
Generated time: August 7, 2024 11:02
This file was created by the app developer. Feel free to contact the original developer with any questions. It was minified (compressed) by AVADA. AVADA do NOT own this script.
*/
class CollectionFilters extends HTMLElement{constructor(){super(),this.accordionType=this.dataset.accordiontype,this.filterParent=this.closest("#filtersCollapse"),this.onActiveFilterClick=this.onActiveFilterClick.bind(this),this.filterForm=this.querySelector("form"),this.quickshop=document.querySelector("quick-shop"),this.filterType=this.dataset.filtertype;var e=this.querySelectorAll(".filter__toggle"),t=(e.forEach(e=>e.addEventListener("click",this.toggleFilterBlock.bind(this))),this.openFilterDrawer=document.getElementById("filter-drawer"),this.openFilterDrawer&&this.openFilterDrawer.addEventListener("click",this.toggleFilterDrawer.bind(this)),this.openSortbyDrawer=document.getElementById("sortby-drawer"),this.openSortbyDrawer&&this.openSortbyDrawer.addEventListener("click",this.toggleFilterDrawer.bind(this)),this.closeFilterDrawer=this.filterParent.querySelector(".collection-filters-close"),this.closeFilterDrawer&&this.closeFilterDrawer.addEventListener("click",this.toggleFilterDrawer.bind(this)),"horizontal-filters"==this.filterType&&(document.body.addEventListener("click",e=>{document.querySelectorAll(".filter__container.open").forEach(e=>{e.querySelector(".filter__toggle").click()})}),document.querySelectorAll(".filter__container").forEach(e=>{e.addEventListener("click",e=>{e.stopPropagation()})})),this.sortby_values=document.querySelectorAll("[data-sortby] .sortby_options"),this.sortby_values.forEach(e=>e.addEventListener("change",this.updateSortBy.bind(this))),this.pagination_value=document.querySelectorAll("[data-custom-pagination] .pagination_value"),this.pagination_value.forEach(e=>e.addEventListener("change",this.updatePagination.bind(this))),this.subCollectionLinks=document.querySelectorAll("[data-subCollections] .collection-entry"),this.subCollectionLinks.forEach(e=>e.addEventListener("click",this._manageSubCollections.bind(this))),this.filterParent.addEventListener("keyup",e=>{"ESCAPE"===e.code.toUpperCase()&&this.closeFilterDrawer.dispatchEvent(new Event("click"))}),this.debouncedOnSubmit=Utility.debounce(e=>{this.onSubmitHandler(e)},500),this.filterForm&&(this.filterForm.addEventListener("input",this.debouncedOnSubmit.bind(this)),this.filterForm.addEventListener("submit",this.debouncedOnSubmit.bind(this)),window.addEventListener("popstate",this.onHistoryChange.bind(this))),this.querySelector("[data-applyFilters]"));t&&t.addEventListener("click",()=>{this.filterForm.dispatchEvent(new Event("submit",{bubbles:!0,cancelable:!0})),setTimeout(()=>{this.closeFilterDrawer.dispatchEvent(new Event("click"))},1e3)}),document.querySelectorAll("[data-pagination]").forEach(e=>e.addEventListener("click",this._managePagination.bind(this))),this.bindActiveFilterButtonEvents(),this.addAccessibilityAttributes(e),this.colorOptionsStyling()}addAccessibilityAttributes(e){e.forEach(e=>{e.setAttribute("role","button"),e.setAttribute("aria-expanded",!1),e.setAttribute("aria-controls",e.nextElementSibling.id)})}onSubmitHandler(t){if(t.preventDefault(),"input"!=t.type||!this.filterParent.classList.contains("filter-active")){let e=document.getElementById("CollectionFiltersForm");(e=t.target&&t.target.closest("form")?t.target.closest("form"):e)&&(t=this._finalQueryString(e),this.renderPage(t))}}_finalQueryString(e){e=new FormData(e);let r="",i="";return e.forEach((e,t)=>{0<=t.indexOf("price-list")?r+="&"+e:0<=t.indexOf("custom_sort_by")||(-1<t.indexOf("tagsFilter-")?""===i?i=e:i+="+"+e:null!=e&&0<e.length&&(""===r?r=t+"="+e:r+="&"+t+"="+e))}),""!=i&&(""==r?r="?constraint="+i:r+="&constraint="+i),r}colorOptionsStyling(){var e=this.querySelector("[data-colorFilter]");e&&e.querySelectorAll(".color-options").forEach(e=>{var t=e.querySelector('input[type="checkbox"]').dataset.handle,t=Utility.getSwatchStyle(t);e.querySelector(".option-label").setAttribute("style",t)})}onActiveFilterClick(e){e.preventDefault(),e.stopPropagation();var t=e.target;let r=null;if("tag_based"==t.dataset.type){var i=t.dataset.remove,i=document.querySelector(`input[data-tagslist][value="${i}"]`),i=(i&&(i.checked=!1),document.getElementById("CollectionFiltersForm"));if(!i)return;r=this._finalQueryString(i)}else e.target.closest(".filter-option-clear").classList.contains("filter-option-clear")&&(t=e.target.closest(".filter-option-clear"),r=new URL(t.href).searchParams.toString());null!=r&&this.renderPage(r)}onHistoryChange(e){e=e.state?.searchParams||"";this.renderPage(e,!1)}renderPage(e,t=!0){document.getElementById("collection-product-grid").querySelector("#template-collection").classList.add("loading");var r=window.location.pathname+"?"+e;this.renderGridFromFetch(r,"filter"),t&&this.updateURLHash(e)}renderGridFromFetch(e,t){e&&fetch(e).then(e=>e.text()).then(e=>{this.renderProductGrid(e,t)})}renderProductGrid(e,t){e=(new DOMParser).parseFromString(e,"text/html");let r="numbers";document.querySelector("[data-pagination]")&&(r=document.querySelector("[data-pagination]").dataset.type||"numbers"),"filter"==t||"sub_collection_filter"==t?(i=e.getElementById("collection-product-grid").innerHTML,document.getElementById("collection-product-grid").innerHTML=i,"sub_collection_filter"==t&&(i=e.querySelector("[data-collectionBanner]").innerHTML,document.querySelector("[data-collectionBanner]").innerHTML=i)):"loadmore"==r?(t=e.getElementById("template-collection").innerHTML,i=e.getElementById("load-more"),document.getElementById("template-collection").insertAdjacentHTML("beforeend",t),i&&document.getElementById("load-more")?document.getElementById("load-more").parentNode.replaceChild(i,document.getElementById("load-more")):document.getElementById("load-more")&&document.getElementById("load-more").remove()):(t=e.getElementById("collection-product-grid").innerHTML,document.getElementById("collection-product-grid").innerHTML=t);var i=document.querySelectorAll(".filter__container.open"),t=e.getElementById("main-collection-filters").innerHTML;document.getElementById("main-collection-filters").innerHTML=t,"horizontal-filters"!=this.filterType&&i.forEach(e=>{e.querySelector(".filter__toggle")&&e.querySelector(".filter__toggle").setAttribute("aria-expanded",!0);e=document.querySelector('.filter__container[data-index="'+e.dataset.index+'"]');e.classList.add("open"),e.querySelector(".filter__block").classList.add("open")});document.querySelectorAll(".filter__container").forEach(e=>{e.querySelectorAll(".filter__item").length<=0&&(e.classList.add("d-none"),e.style.display="none")});t=e.querySelector("[data-totalProducts]"),t&&(document.querySelector("[data-totalProducts]").innerHTML=t.innerHTML),i=e.querySelector("[data-activeFilters]");i&&(document.querySelector("[data-activeFilters]").innerHTML=i.innerHTML),this.bindActiveFilterButtonEvents(),this.quickshop&&this.quickshop.updateEvents()}bindActiveFilterButtonEvents(){document.querySelectorAll(".filter-option-clear").forEach(e=>{e.addEventListener("click",this.onActiveFilterClick,{once:!0})})}updateURLHash(e){history.pushState({searchParams:e},"",""+window.location.pathname+(e&&"?".concat(e)))}updateSortBy(e){e=e.currentTarget;let t=document.querySelector('[data-sortby] [name="custom_sort_by_mobile"]:checked').value;"custom_sort_by_desktop"==e.name&&(t=document.querySelector('[data-sortby] [name="custom_sort_by_desktop"]:checked').value),this.querySelector('[name="sort_by"]').value=t,this.querySelector('[name="sort_by"]').dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0}))}updatePagination(e){e.preventDefault();e.currentTarget;e=document.querySelector('[data-custom-pagination] [type="radio"]:checked').value;this.querySelector('[name="count"]').value=e,this.querySelector('[name="count"]').dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0}))}_manageSubCollections(e){e.preventDefault();var t=e.currentTarget;let r=document.getElementById("CollectionFiltersForm");t.closest("form")&&(r=e.target.closest("form"));e=this._finalQueryString(r);let i=t.href+"?"+e;this.renderGridFromFetch(i,"sub_collection_filter"),setTimeout(()=>{history.pushState({},"",i)},500)}_managePagination(e){e.preventDefault();var t=e.currentTarget.href,e=parseInt(e.target.closest("[data-pagination_bar]")?.getAttribute("data-pagination_bar"));t&&t.includes("?")&&t.includes("=")&&(t=t+"&count="+e),this.renderGridFromFetch(t,"pagination"),setTimeout(()=>{history.pushState({},"",t)},500)}toggleFilterDrawer(e){e.preventDefault();e=e.currentTarget;"filter-drawer"==e.id||"sortby-drawer"==e.id?(this.filterParent.classList.add("filter-active"),e.setAttribute("aria-expanded",!0),e.setAttribute("tabindex","-1"),"sortby-drawer"==e.id?this.filterParent.classList.add("sortby-drawer"):this.filterParent.classList.remove("sortby-drawer"),Utility.trapFocus(this.filterParent),Utility.forceFocus(this.closeFilterDrawer),siteOverlay.prototype.showOverlay()):(this.filterParent.classList.remove("filter-active"),this.filterParent.classList.remove("sortby-drawer"),this.openFilterDrawer&&(this.openFilterDrawer.setAttribute("aria-expanded",!1),this.openFilterDrawer.removeAttribute("tabindex")),this.openSortbyDrawer&&(this.openSortbyDrawer.setAttribute("aria-expanded",!1),this.openSortbyDrawer.removeAttribute("tabindex")),Utility.removeTrapFocus(this.filterParent),siteOverlay.prototype.hideOverlay())}toggleFilterBlock(e){e.preventDefault();e=e.currentTarget;e.parentNode.classList.contains("open")?this.closeFilterBlock(e):this.openFilterBlock(e)}openFilterBlock(e){let t=e.parentNode;e.setAttribute("aria-expanded",!0),Utility.toggleElement(t,"open"),"single"==this.accordionType&&t.parentNode.querySelectorAll(".filter__container").forEach(e=>{e!=t&&(e.classList.remove("open"),e.querySelector(".filter__block").classList.remove("open"),e.querySelector(".filter__toggle").setAttribute("aria-expanded",!1))}),Utility.trapFocus(t)}closeFilterBlock(e){var t=e.parentNode;e.setAttribute("aria-expanded",!1),Utility.toggleElement(t,"close"),Utility.removeTrapFocus(t)}}customElements.define("collection-filters",CollectionFilters);class PriceRange extends HTMLElement{constructor(){super(),this.querySelectorAll("input").forEach(e=>e.addEventListener("change",this.onRangeChange.bind(this))),this.setMinAndMaxValues()}onRangeChange(e){this.adjustToValidValues(e.currentTarget),this.setMinAndMaxValues()}setMinAndMaxValues(){var e=this.querySelectorAll("input"),t=e[0],e=e[1];e.value&&t.setAttribute("max",e.value),t.value&&e.setAttribute("min",t.value),""===t.value&&e.setAttribute("min",0),""===e.value&&t.setAttribute("max",e.getAttribute("max"))}adjustToValidValues(e){var t=Number(e.value),r=Number(e.getAttribute("min")),i=Number(e.getAttribute("max"));t<r&&(e.value=r),i<t&&(e.value=i)}}customElements.define("price-range",PriceRange);class PriceRangeSlider extends HTMLElement{constructor(){super();var e,t;for(e of this.getElementsByClassName("range-slider"))for(t of e.getElementsByTagName("input"))"range"===t.type&&(t.oninput=this.getVals,t.oninput())}getVals(){var e=this.parentNode,t=e.getElementsByTagName("input");let r=parseFloat(t[0].value),i=parseFloat(t[1].value);r>i&&(t=i,i=r,r=t),e.getElementsByClassName("rangeValues")[0].innerHTML=Shopify.formatMoney(100*r,window.globalVariables.money_format)+" - "+Shopify.formatMoney(100*i,window.globalVariables.money_format)}}customElements.define("range-slider",PriceRangeSlider);