/*
Generated time: August 7, 2024 11:02
This file was created by the app developer. Feel free to contact the original developer with any questions. It was minified (compressed) by AVADA. AVADA do NOT own this script.
*/
$(document).ready(function(){$(".toggleingredients").click(function(e){e.preventDefault();e=$(this).data("target");$("#"+e).toggle("fast"),$(this).text(function(e,a){return"+ View all ingredients"===a?"- View all ingredients":"+ View all ingredients"})})});let manualBISpopup=document.querySelector(".manual-bis-popup");if(manualBISpopup){let e=document.querySelectorAll(".manual-bis-trigger"),a=manualBISpopup.querySelectorAll("[data-close-modal]"),o=manualBISpopup.querySelector("form");e&&e.forEach(l=>{l.addEventListener("click",function(e){e.preventDefault(),manualBISpopup.querySelector(".manual-bis-message").textContent="",manualBISpopup.querySelector(".manual-bis-success").classList.add("hidden");var e=l.dataset.prod_title,a=l.dataset.prod_id,t=l.dataset.var_id;manualBISpopup.querySelector(".manual-bis-popup__product").textContent=e,manualBISpopup.querySelector('[name="product"]').value=a,manualBISpopup.querySelector('[name="variant"]').value=t,o.querySelector('[name="email"]').value="",manualBISpopup.classList.remove("hidden"),$(manualBISpopup).fadeIn(200)})}),0<a.length&&a.forEach(function(e){e.addEventListener("click",function(){$(manualBISpopup).fadeOut(200);var e=document.querySelector(".manual-bis-popup__success");e&&e.parentNode.removeChild(e),manualBISpopup.querySelector(".btn--submit").style.display="block"})}),o&&o.addEventListener("submit",function(e){e.preventDefault();var e=o.querySelector('[id="manual-bis-account"]').value,a=o.querySelector('[id="manual-bis-email"]').value,t=parseInt(o.querySelector('[id="manual-bis-variant"]').value),l=o.querySelector('[id="manual-bis-product"]').value,u=o.querySelector('[id="subscribe_for_newsletter"]').checked,n=o.querySelector('[id="manual-bis-list-id"]').value;Utility.validateEmail(a)&&(console.log(u),e={a:e,email:a,variant:t,product:l,platform:"shopify",subscribe_for_newsletter:!0,g:n},console.log(e),$.ajax({type:"POST",url:"https://a.klaviyo.com/onsite/components/back-in-stock/subscribe",data:e}).done(function(e){console.log(e),e.message&&(manualBISpopup.querySelector(".manual-bis-message").textContent=e.message),e.success&&manualBISpopup.querySelector(".manual-bis-success").classList.remove("hidden")}),u)&&(simulateInput(document.getElementById("bis-klaviyo-email").querySelector('input[type="email"]'),a),document.getElementById("bis-klaviyo-email").querySelector('input[type="submit"]').click())})}function simulateInput(e,a){for(var t=0;t<a.length;t++){var l=new KeyboardEvent("keydown",{bubbles:!0,cancelable:!0,key:a[t]}),l=(e.dispatchEvent(l),e.value+=a[t],new Event("input",{bubbles:!0,cancelable:!0})),l=(e.dispatchEvent(l),new KeyboardEvent("keyup",{bubbles:!0,cancelable:!0,key:a[t]}));e.dispatchEvent(l)}}